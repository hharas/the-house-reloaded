{% extends "base.html" %} {% block title %}{{ category.title }}/{% endblock %}
{% block leftheader %} <span>> {{ category.title }}/</span> {% endblock %} {%
block rightheader %} {% if current_user.is_authenticated %} {% if
current_user.role == "admin" %}
<a href="{{ url_for('delete_category', cat_title=category.title) }}"
  >delete category</a
>
| {% endif %} <a href="/{{ category.title }}/new">create thread</a> | {% endif
%} {% endblock%} {% block main %} {% if threads|length == 0 %}
<div class="main">
  <p>There are no threads here.</p>
</div>
{% else %}
<div class="index-main categories">
  <ol>
    {% for thread in threads %}
    <li class="row">
      <p class="title">
        <a href="/{{ category.title }}/{{ thread.id }}">{{ thread.title }}</a>
      </p>
      <div class="bottom">
        <p>
          created by
          <a
            href="{{ url_for('view_user', username=User.query.filter_by(id=thread.creator).first().username) }}"
            >{{ User.query.filter_by(id=thread.creator).first().username }}</a
          >
          at {{ thread.creation_date }} | viewed {{ thread.views }} times | {%
          if thread.last_active_user %} last active user is
          <a
            href="{{ url_for('view_user', username=User.query.filter_by(id=thread.last_active_user).first().username) }}"
            >{{
            User.query.filter_by(id=thread.last_active_user).first().username
            }}</a
          >
          at {{ thread.last_activity_date }} {% else %} Inactive {% endif %}
        </p>
      </div>
    </li>
    {% endfor %}
  </ol>
</div>
{% endif %} {% endblock %}
